"use strict";angular.module("sbAdminApp").controller("DepartmentsCtrl",function($scope,$position,$http,$q){function getDepartmentsMangers(){$http.get("https://shenkar-show.herokuapp.com/department/users",{withCredentials:!0}).then(function(resp){$scope.users=resp.data,$http.get("scripts/departments.json").then(function(resp){$scope.departments=resp.data})})}$scope.departments=[],$scope["new"]={manager:"1"},$scope.init=function(){getDepartmentsMangers()},$scope.getManagerName=function(id){var name="";return $scope.users.forEach(function(u){u._id==id&&(name=u.name)}),name},$scope.setEdit=function(id){return $scope.selected=null,$scope.departments.forEach(function(d){d._id==id&&($scope.selected=angular.copy(d))}),$scope.selected?void 0:!1},$scope.update=function(){$http.put("https://shenkar-show.herokuapp.com/department",$scope.selected).then(function(resp){toastr.info("המחלקה עודכנה בהצלחה"),$scope.init(),$("#edit").modal("hide")})},$scope.create=function(){$http.post("https://shenkar-show.herokuapp.com/department",$scope["new"]).then(function(resp){toastr.info("המחלקה עודכנה בהצלחה"),$scope.init(),$("#new").modal("hide")},function(err){})},$scope["delete"]=function(){$http["delete"]("https://shenkar-show.herokuapp.com/department/"+$scope.selected._id).then(function(resp){toastr.info("נמחק בהצלחה"),$scope.init()})}});